<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../libs/three/utils/npm/build.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AbstractPlugin.html">AbstractPlugin</a></li>
            
                <li><a href="../classes/Config.html">Config</a></li>
            
                <li><a href="../classes/Controls.html">Controls</a></li>
            
                <li><a href="../classes/Plot.html">Plot</a></li>
            
                <li><a href="../classes/Plugin 3D.html">Plugin 3D</a></li>
            
                <li><a href="../classes/Plugin Axes.html">Plugin Axes</a></li>
            
                <li><a href="../classes/Plugin BasicMaterial.html">Plugin BasicMaterial</a></li>
            
                <li><a href="../classes/Plugin CameraControl.html">Plugin CameraControl</a></li>
            
                <li><a href="../classes/Plugin Color.html">Plugin Color</a></li>
            
                <li><a href="../classes/Plugin Dataset.html">Plugin Dataset</a></li>
            
                <li><a href="../classes/Plugin File.html">Plugin File</a></li>
            
                <li><a href="../classes/Plugin Function.html">Plugin Function</a></li>
            
                <li><a href="../classes/Plugin Heatmap.html">Plugin Heatmap</a></li>
            
                <li><a href="../classes/Plugin Light.html">Plugin Light</a></li>
            
                <li><a href="../classes/Plugin LinePlot.html">Plugin LinePlot</a></li>
            
                <li><a href="../classes/Plugin Plane.html">Plugin Plane</a></li>
            
                <li><a href="../classes/Plugin ScatterPlot.html">Plugin ScatterPlot</a></li>
            
                <li><a href="../classes/Plugin SurfacePlot.html">Plugin SurfacePlot</a></li>
            
                <li><a href="../classes/Plugin WireframeMaterial.html">Plugin WireframeMaterial</a></li>
            
                <li><a href="../classes/SceneGraph.html">SceneGraph</a></li>
            
                <li><a href="../classes/Templates.html">Templates</a></li>
            
                <li><a href="../classes/Toolbox.html">Toolbox</a></li>
            
                <li><a href="../classes/UTILS.html">UTILS</a></li>
            
                <li><a href="../classes/VLib.html">VLib</a></li>
            
                <li><a href="../classes/VMediator.html">VMediator</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Controls.html">Controls</a></li>
            
                <li><a href="../modules/main.html">main</a></li>
            
                <li><a href="../modules/Plot.html">Plot</a></li>
            
                <li><a href="../modules/SceneGraph.html">SceneGraph</a></li>
            
                <li><a href="../modules/Templates.html">Templates</a></li>
            
                <li><a href="../modules/Toolbox.html">Toolbox</a></li>
            
                <li><a href="../modules/VLib.html">VLib</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../libs/three/utils/npm/build.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
/**
 * Builds node_modules three and three-math
 *
 * Expects a single command line argument that is the build version in the format 0.54.4-dev
 *
 * @author bhouston / http://exocortex.com
 */

var fs = require( &quot;fs&quot; );
var cp = require(&#x27;child_process&#x27;);

var commandLineArguments = process.argv.splice(2);

var outputRootDir = &quot;./node_modules&quot;;
var inputDir = &quot;../../build&quot;;
var readmeFileName = &quot;../../README.md&quot;;

var headerFileName = &quot;./header.js&quot;;
var footerFileName = &quot;./footer.js&quot;;

if( commandLineArguments.length == 0 ) {
	throw new Error( &quot;build version must be specified as a command line argument (e.g. 0.54.3-dev)&quot;);
}
var buildVersion = commandLineArguments[0];


var concateFiles = function ( inputFileNames, outputFileName ) {
	var buffer = [];
	for ( var i = 0; i &lt; inputFileNames.length; i++ ) {
		buffer.push( 
			fs.readFileSync( inputFileNames[i], &#x27;utf8&#x27; )
			);
	}

	var combinedContents = buffer.join(&quot;&quot;);
	fs.writeFileSync( outputFileName, combinedContents, &#x27;utf8&#x27; );   
}

var createTemplatedFile = function ( templateFileName, replaceSet, outputFileName ) {
	var templateContents = fs.readFileSync( templateFileName, &#x27;utf8&#x27; );
	for( var token in replaceSet ) {
		templateContents = templateContents.replace( &quot;%&quot;+token+&quot;%&quot;, replaceSet[token] );
	}
	fs.writeFileSync( outputFileName, templateContents, &#x27;utf8&#x27; );
}

var copyFile = function( sourceFileName, destinationFileName ) {

	var contents = fs.readFileSync( sourceFileName, &#x27;utf8&#x27; );
	fs.writeFileSync( destinationFileName, contents, &#x27;utf8&#x27; );

}

var buildModule = function ( name, version ) {

	if( ! fs.existsSync( outputRootDir ) ) {
		fs.mkdirSync( outputRootDir );
	}

	var outputModuleDir = outputRootDir + &quot;/&quot; + name;
	if( ! fs.existsSync( outputModuleDir ) ) {
		fs.mkdirSync( outputModuleDir );
	}
	// make directory moduleDir

	var inputRawFileName = inputDir + &quot;/&quot; + name + &quot;.js&quot;;
	var outputRawFileName = outputModuleDir + &quot;/&quot; + name + &quot;.js&quot;;

	concateFiles( [ headerFileName, inputRawFileName, footerFileName ], outputRawFileName );

	var inputMinifiedFileName = inputDir + &quot;/&quot; + name + &quot;.min.js&quot;;
	var outputMinifiedFileName = outputModuleDir + &quot;/&quot; + name + &quot;.min.js&quot;;

	concateFiles( [ headerFileName, inputMinifiedFileName, footerFileName ], outputMinifiedFileName );

	var templatePackageFileName = &quot;./&quot; + name + &quot;.package.json&quot;;
	var replaceSet = {
		&quot;VERSION&quot;: buildVersion
	};
	var outputPackageFileName = outputModuleDir + &quot;/package.json&quot;;
	createTemplatedFile( templatePackageFileName, replaceSet, outputPackageFileName );

	var outputReadmeFileName = outputModuleDir + &quot;/README.md&quot;;
	copyFile( readmeFileName, outputReadmeFileName );
}

var cmdExe, args;
if (process.platform === &#x27;win32&#x27; || process.platform === &#x27;win64&#x27;) {
	cmdExe = &quot;cmd.exe&quot;;
	args = [ &quot;/c&quot;, &quot;build_all.bat&quot; ];
} else {
	cmdExe = &#x27;./build_all.sh&#x27;;
	args = [];
}
var opts = { &quot;cwd&quot;: &quot;../build&quot; };
var buildAll = cp.spawn( cmdExe, args, opts );

buildAll.stdout.on(&#x27;data&#x27;, function (data) {
  console.log(&#x27;stdout: &#x27; + data);
});

buildAll.stderr.on(&#x27;data&#x27;, function (data) {
  console.log(&#x27;stderr: &#x27; + data);
});

buildAll.on( &#x27;exit&#x27;, function ( exitCode ) {
	console.log( &quot;exitCode: &quot; + exitCode );
	buildModule( &quot;three&quot; );
	buildModule( &quot;three-math&quot; );
});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
