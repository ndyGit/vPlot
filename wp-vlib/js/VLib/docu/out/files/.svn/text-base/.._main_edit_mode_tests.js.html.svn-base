<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>../main_edit_mode_tests.js</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title=""></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AbstractPlugin.html">AbstractPlugin</a></li>
            
                <li><a href="../classes/Config.html">Config</a></li>
            
                <li><a href="../classes/Controls.html">Controls</a></li>
            
                <li><a href="../classes/Plot.html">Plot</a></li>
            
                <li><a href="../classes/Plugin 3D.html">Plugin 3D</a></li>
            
                <li><a href="../classes/Plugin Axes.html">Plugin Axes</a></li>
            
                <li><a href="../classes/Plugin BasicMaterial.html">Plugin BasicMaterial</a></li>
            
                <li><a href="../classes/Plugin CameraControl.html">Plugin CameraControl</a></li>
            
                <li><a href="../classes/Plugin Color.html">Plugin Color</a></li>
            
                <li><a href="../classes/Plugin Dataset.html">Plugin Dataset</a></li>
            
                <li><a href="../classes/Plugin File.html">Plugin File</a></li>
            
                <li><a href="../classes/Plugin Function.html">Plugin Function</a></li>
            
                <li><a href="../classes/Plugin Heatmap.html">Plugin Heatmap</a></li>
            
                <li><a href="../classes/Plugin Light.html">Plugin Light</a></li>
            
                <li><a href="../classes/Plugin LinePlot.html">Plugin LinePlot</a></li>
            
                <li><a href="../classes/Plugin Plane.html">Plugin Plane</a></li>
            
                <li><a href="../classes/Plugin ScatterPlot.html">Plugin ScatterPlot</a></li>
            
                <li><a href="../classes/Plugin SurfacePlot.html">Plugin SurfacePlot</a></li>
            
                <li><a href="../classes/Plugin WireframeMaterial.html">Plugin WireframeMaterial</a></li>
            
                <li><a href="../classes/SceneGraph.html">SceneGraph</a></li>
            
                <li><a href="../classes/Templates.html">Templates</a></li>
            
                <li><a href="../classes/Toolbox.html">Toolbox</a></li>
            
                <li><a href="../classes/UTILS.html">UTILS</a></li>
            
                <li><a href="../classes/VLib.html">VLib</a></li>
            
                <li><a href="../classes/VMediator.html">VMediator</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/Controls.html">Controls</a></li>
            
                <li><a href="../modules/main.html">main</a></li>
            
                <li><a href="../modules/Plot.html">Plot</a></li>
            
                <li><a href="../modules/SceneGraph.html">SceneGraph</a></li>
            
                <li><a href="../modules/Templates.html">Templates</a></li>
            
                <li><a href="../modules/Toolbox.html">Toolbox</a></li>
            
                <li><a href="../modules/VLib.html">VLib</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: ../main_edit_mode_tests.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
requirejs.config({

	paths : {
		&#x27;vlib&#x27; : &#x27;core/Vlib&#x27;,
		&#x27;config&#x27; : &#x27;config.vlib&#x27;,
		&#x27;pluginLoader&#x27; : &#x27;pluginLoader&#x27;,
		&#x27;jquery_ui&#x27; : &#x27;libs/jquery-ui/js/jquery-ui-1.10.3.custom.min&#x27;,
		&#x27;jquery&#x27; : &#x27;libs/jquery/jquery.min&#x27;,
		&#x27;underscore&#x27; : &#x27;libs/underscore/underscore.min&#x27;,
		&#x27;three&#x27; : &#x27;libs/three/build/three&#x27;,
		&#x27;three_trackball_controls&#x27; : &#x27;libs/three/controls/TrackballControls&#x27;,
		&#x27;three_orbit_controls&#x27; : &#x27;libs/three/controls/OrbitAndPanControls&#x27;,
		&#x27;orgChart&#x27; : &#x27;libs/jOrgChart/jquery.jOrgChart&#x27;,
		&#x27;bootstrap&#x27;:&#x27;libs/bootstrap/bootstrap.min&#x27;,
		&#x27;d3&#x27;:&#x27;libs/novus/lib/d3.v3&#x27;,
		&#x27;nv&#x27;:&#x27;libs/novus/nv.d3&#x27;
		/*
		// SHADER not used
		,
		&#x27;convolutionShader&#x27;:&#x27;libs/three/js/shaders/ConvolutionShader&#x27;,
		&#x27;copyshader&#x27;:&#x27;libs/three/js/shaders/CopyShader&#x27;,
		&#x27;fxaashader&#x27;:&#x27;libs/three/js/shaders/FXAAShader&#x27;,
		&#x27;effectcomposer&#x27;:&#x27;libs/three/js/postprocessing/EffectComposer&#x27;,
		&#x27;mastpass&#x27;:&#x27;libs/three/js/postprocessing/MaskPass&#x27;,
		&#x27;rendererpass&#x27;:&#x27;libs/three/js/postprocessing/RenderPass&#x27;,
		&#x27;shaderpass&#x27;:&#x27;libs/three/js/postprocessing/ShaderPass&#x27;,
		&#x27;bloompass&#x27;:&#x27;libs/three/js/postprocessing/BloomPass&#x27;,
		&#x27;savepass&#x27;:&#x27;libs/three/js/postprocessing/SavePass&#x27;,
		&#x27;shaderextras&#x27;:&#x27;libs/three/js/ShaderExtras&#x27;,
		&#x27;additiveblendingshader&#x27;:&#x27;libs/three/js/shaders/AdditiveBlendShader&#x27;,
		&#x27;horizontalblurshader&#x27;:&#x27;libs/three/js/shaders/HorizontalBlurShader&#x27;,
		&#x27;verticalblurshader&#x27;:&#x27;libs/three/js/shaders/VerticalBlurShader&#x27;
		*/

	},
	shim : {
		&#x27;underscore&#x27; : {
			exports : &#x27;_&#x27;
		},

		&#x27;three&#x27; : {
			exports : &#x27;THREE&#x27;
		},
		/*
		&#x27;shaderextras&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;additiveblendingshader&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;horizontalblurshader&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;verticalblurshader&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;convolutionShader&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;copyshader&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;fxaashader&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;effectcomposer&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;mastpass&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;rendererpass&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;shaderpass&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;bloompass&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;savepass&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},*/
		&#x27;three_trackball_controls&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;three_orbit_controls&#x27; : {
			exports : &#x27;THREE&#x27;,
			&#x27;deps&#x27; : [&#x27;three&#x27;]
		},
		&#x27;jquery_ui&#x27; : {
			exports : &#x27;$&#x27;,
			&#x27;deps&#x27; : [&#x27;jquery&#x27;]
		},
		&#x27;orgChart&#x27; : {
			exports : &#x27;$&#x27;,
			&#x27;deps&#x27; : [&#x27;jquery&#x27;]
		},
		&#x27;bootstrap&#x27; : {
			&#x27;deps&#x27; : [&#x27;jquery&#x27;]
		},
		&#x27;d3&#x27;:{
			exports: &#x27;d3&#x27;
		},
		&#x27;nv&#x27;:{
			&#x27;deps&#x27; : [&#x27;d3&#x27;],
			exports: &#x27;d3&#x27;
		}

	}
});

/**
 * MAIN EDIT-MODE
 */
 define(function(require) {

 	require(
 		[ &#x27;jquery&#x27;, &#x27;config&#x27;],
 		function($,Config) {

	 	// ************************************************************************
		// INIT LIB
		// ************************************************************************
		var VLib = require(&#x27;vlib&#x27;);
		var v = new VLib();
		console.log(&quot;VLib version &quot; + v.version);

				// ************************************************************************
				// CALLBACKS
				// ************************************************************************
				var fileUploadCB = function(formId){

					var formData = new FormData($(formId)[0]);
					$.ajax({
						url: &#x27;http://localhost/VLib/server/processFileUpload.php&#x27;,
						type: &#x27;POST&#x27;,

						        //Ajax events
						        beforeSend: function(e){},
						        success: function(e){
						        	v.publish(Config.CHANNEL_SUCCESS,&#x27;File saved &#x27;+e);
						        },
						        error: function(e){
						        	v.publish(Config.CHANNEL_ERROR,&#x27;Error occurred during file upload! &#x27;+e);
						        },
						        // Form data
						        data: formData,
						        //Options to tell jQuery not to process data or worry about content-type.
						        cache: false,
						        contentType: false,
						        processData: false
						    });


				}
				var fileDeleteCB = function(fileArray){
					alert(&quot;DELETE files: &quot;+JSON.stringify(fileArray));
				}
				var deleteTemplateCB = function(template){
					alert(&#x27;DELETE TEMPLATE CALLBACK in MAIN called: &#x27; +template.name+&#x27; &#x27;+template.description+&quot; &quot;+template.sceneGraph);
					// ADD AJAX CALL HERE...

					template.action = &quot;delete_t&quot;;
					var jsonObj = template;
					var postData = JSON.stringify(jsonObj);
					var postArray = {json:postData};

					$.ajax({
						type: &#x27;POST&#x27;,
						url: &quot;http://rc.yol.at/wordpress/wp-content/plugins/test/process.php&quot;,
						data: postArray,
						success: function(data){
							// ADD AJAX CALL HERE...
							// if OK register template
							v.publish(Config.CHANNEL_SUCCESS,&#x27;Template deleted! &#x27;+e);
						},
						error: function(e){
							v.publish(Config.CHANNEL_ERROR,&#x27;Delete file failed!&#x27;+e);
						},
					});

					v.publish(c.CHANNEL_SUCCESS,&#x27;Template deleted!&#x27;);

				}
				var saveTemplateCB = function(template){
					alert(&#x27;Save TEMPLATE CALLBACK in MAIN called: &#x27; +template.name+&#x27; &#x27;+template.description+&quot; &quot;+template.sceneGraph);

					template.action = &quot;save&quot;;
					var jsonObj = template;
					var postData = JSON.stringify(jsonObj);
					var postArray = {json:postData};

					$.ajax({
						type: &#x27;POST&#x27;,
						url: &quot;http://rc.yol.at/wordpress/wp-content/plugins/test/process.php&quot;,
						data: postArray,
						success: function(data){
							// ADD AJAX CALL HERE...
							// if OK register template
							v.registerTemplate(_.clone(template));
							v.publish(Config.CHANNEL_SUCCESS,&#x27;Template saved! &#x27;+e);
						},
						error: function(e){
							v.publish(Config.CHANNEL_ERROR,&#x27;Save template failed! &#x27;+e);
						},
					});



				}
				// ************************************************************************
				// REGISTER CORE MODULES
				// ************************************************************************
				var templates = require(&#x27;core/modules/templates/templates.vlib&#x27;);
				var controls = require(&#x27;core/modules/controls/controls.vlib&#x27;);
				var toolbox = require(&#x27;core/modules/toolbox/toolbox.vlib&#x27;);
				var sceneGraph = require(&#x27;core/modules/scenegraph/scenegraph.vlib&#x27;);
				var plotModule = require(&#x27;core/modules/plot/plot.vlib&#x27;);
				var plot = new plotModule();

				v.registerModule(templates);
				v.registerModule(controls);
				v.registerModule(toolbox);
				v.registerModule(sceneGraph);
				v.registerModule(plot);

				// ************************************************************************
				// REGISTER DATA FILES
				// TODO: FILLED VIA PHP DATABASE REQUEST
				// ************************************************************************
				var file1 = {
					path 		: &#x27;All_KL_Div.gnuplot.dat&#x27;,
					name 		: &#x27;all_kv&#x27;,
					description	: &#x27;Description to all kv...&#x27;
				};
				var file2 = {
					path 		: &#x27;All_Success_Stretch.gnuplot.dat&#x27;,
					name 		: &#x27;all_success&#x27;,
					description	: &#x27;Description to all success stretch...&#x27;
				};
				v.registerFile(file1);
				v.registerFile(file2);

				// ************************************************************************
				// REGISTER templates
				// TODO: FILLED VIA PHP DATABASE REQUEST!
				// ************************************************************************

				var scale_1 = require(&#x27;templates/t1_scale_test.tmpl.vlib&#x27;);
				var scatter_1 = require(&#x27;templates/all_kv_1.tmpl.vlib&#x27;);
				var line_1= require(&#x27;templates/t1_line_axes.tmpl.vlib&#x27;);
				var scatter_2= require(&#x27;templates/t1_scatter.tmpl.vlib&#x27;);
				var scatter_3= require(&#x27;templates/t1_s_f_hm.tmpl.vlib&#x27;);
				var surface_1= require(&#x27;templates/t1_surface.tmpl.vlib&#x27;);
				var all_1= require(&#x27;templates/t1_all.tmpl.vlib&#x27;);
				var plane_range_1= require(&#x27;templates/t1_range_test.tmpl.vlib&#x27;);
				var plane_range_2= require(&#x27;templates/t1_range_test_2.tmpl.vlib&#x27;);
				var plane_range_3 = require(&#x27;templates/t1_range_test_3.tmpl.vlib&#x27;);
				var plane_range_4 = require(&#x27;templates/t1_range_test_4.tmpl.vlib&#x27;);
				var scatter_perf_1 = require(&#x27;templates/t1_scatter_perf.tmpl.vlib&#x27;);
				var surface_perf_1 = require(&#x27;templates/t1_surface_perf.tmpl.vlib&#x27;);

				var scatterPerf1 = {
					sceneGraph	: scatter_perf_1,
					name		: &#x27;Scatter Performance 90k&#x27;,
					description	: &#x27;Scatterplot with 90.000 sprite particles. FUNCTION: sin(sqrt(x^2+y^2))&#x27;
				};
				var surfacePerf1 = {
					sceneGraph	: surface_perf_1,
					name		: &#x27;Surface Performance 90k&#x27;,
					description	: &#x27;Surface with 90.000 sprite particles. FUNCTION: sin(sqrt(x^2+y^2))&#x27;
				};

				var scale1 = {
					sceneGraph	: scale_1,
					name		: &#x27;Scale test&#x27;,
					description	: &#x27;Using scatter,surface and lineplot. x: 0-1,y:0-1. FUN: z = sin(x). POINTS should match!&#x27;
				};

				var scatter1 = {
					sceneGraph	: scatter_1,
					name		: &#x27;Scatter test&#x27;,
					description	: &#x27;description to Scatter test&#x27;
				};
				var scatter2 = {
					sceneGraph	: scatter_2,
					name		: &#x27;Scatter test2 &#x27;,
					description	: &#x27;Using PLANE and FUNCTION z = sin(x)&#x27;
				};
				var scatter3 = {
					sceneGraph	: scatter_3,
					name		: &#x27;Scatter test 3 &#x27;,
					description	: &#x27;Using FILE input&#x27;
				};
				var line1 = {
					sceneGraph	: line_1,
					name		: &#x27;Line test &#x27;,
					description	: &#x27;T1: 3d line and axes using a normal dataset. Show labels == TRUE.&#x27;
				};
				var surface1 = {
					sceneGraph	: surface_1,
					name		: &#x27;Surface test &#x27;,
					description	: &#x27;T1: 3d surface and axes using a plane dataset. FUNCTION z = cos(x)&#x27;
				};
				var all1 = {
					sceneGraph	: all_1,
					name		: &#x27;All in one&#x27;,
					description	: &#x27;T1: 3d scatter , surface, line&#x27;
				};
				var planeRange1 = {
					sceneGraph	: plane_range_1,
					name		: &#x27;Range test (+x +y)&#x27;,
					description	: &#x27; +x +y&#x27;
				};
				var planeRange2 = {
					sceneGraph	: plane_range_2,
					name		: &#x27;Range test (+x -y)&#x27;,
					description	: &#x27; +x -y&#x27;
				};
				var planeRange3 = {
					sceneGraph	: plane_range_3,
					name		: &#x27;Range test (-x -y)&#x27;,
					description	: &#x27; -x -y&#x27;
				};
				var planeRange4 = {
					sceneGraph	: plane_range_4,
					name		: &#x27;Range test (-x +y)&#x27;,
					description	: &#x27; -x +y&#x27;
				};

				v.registerTemplate(_.clone(scale1));
				v.registerTemplate(_.clone(planeRange1));
				v.registerTemplate(_.clone(planeRange2));
				v.registerTemplate(_.clone(planeRange3));
				v.registerTemplate(_.clone(planeRange4));
				v.registerTemplate(_.clone(scatter1));
				v.registerTemplate(_.clone(scatter2));
				v.registerTemplate(_.clone(scatter3));
				v.registerTemplate(_.clone(surface1));
				v.registerTemplate(_.clone(line1));
				v.registerTemplate(_.clone(all1));
				v.registerTemplate(_.clone(scatterPerf1));
				v.registerTemplate(_.clone(surfacePerf1));


				var jsonObj = {&quot;action&quot;: &quot;get_t&quot;};
				var postData = JSON.stringify(jsonObj);
				var postArray = {json:postData};

				$.ajax({
					type: &#x27;POST&#x27;,
					url: &quot;http://rc.yol.at/wordpress/wp-content/plugins/test/process.php&quot;,
					data: postArray,
					success: function(data){


						var d = $.parseJSON(data);
						for (var i=0; i &lt; d.length; i++) {

							var templateTmp = {
								sceneGraph	: $.parseJSON(d[i].template_graph),
								name		: d[i].id + &quot;-&quot; +d[i].template_name,
								description	: d[i].template_description
							};
							v.registerTemplate(_.clone(templateTmp));
						}
							// ADD AJAX CALL HERE...

						}
					});
				// ************************************************************************
				// UPLOAD DATA CALLBACK
				// TODO: FILL CALLBACK FUNCTION. JQUERY-POST template &amp; insert into DB
				// ************************************************************************
				v.setUploadDataCallback(fileUploadCB);
				// ************************************************************************
				// DELETE DATA CALLBACK
				// TODO: FILL CALLBACK FUNCTION. JQUERY-POST DELETE FROM DB
				// ************************************************************************
				v.setDeleteDataCallback(fileDeleteCB);
				// ************************************************************************
				// SAVE TEMPLATE CALLBACK
				// TODO: FILL CALLBACK FUNCTION. JQUERY-POST template &amp; insert into DB
				// ************************************************************************
				v.setSaveTemplateCallback(saveTemplateCB);
				// ************************************************************************
				// DELETE TEMPLATE CALLBACK
				// TODO: DELETE DATASET FROM DB
				// ************************************************************************
				v.setDeleteTemplateCallback(deleteTemplateCB);

				// ************************************************************************
				// INIT
				// ************************************************************************
				templates.init(&#x27;#vTempl&#x27;);
				controls.init(&#x27;#vControls&#x27;);
				sceneGraph.init(&#x27;#vGraph&#x27;);
				toolbox.init(&#x27;#vList&#x27;);
				plot.init(&#x27;#vPlot&#x27;);

				console.log(&#x27;#######################################&#x27;);
				console.log(&#x27;[ main ][channels in use ] &#x27;
					+ Object.keys(v.getChannels));
				console.log(&#x27;[ main ][plugins in use ] &#x27;
					+ Object.keys(v.getPlugins));

				console.log(&quot;#########################################&quot;);
				//v.load(template2);
			});






});

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
