<html>
<head>
	<title>WilkinsonExtended</title>
	<style type="text/css">


		table {
			height: auto;
			width: 100%;
		}
		tr:nth-child(2n) {
			background-color: #D9EBD3;
		}
		td {
			height: 50px;
			text-align: center;
		}
		th {
			border-bottom: 2px solid #808080;
		}
		body {
			margin: 0 auto;
		}
		H1, H2, H3, H4 {
			margin: 0px;
			text-align: center;
			width: 100%;
		}
		.seperator {
			margin-bottom: 50px;
		}
		H1 {
			margin-top: 50px;
		}

	</style>
</head>
<body>
	<h1>Scale linear Demo</h1>
	<h3>domain = [min,max] values from input data</h3>
	<h3>range = [min,max] borders of target value range </h3>
	<div class="seperator"></div>
	<table id="container" class="container">
		<thead>
			<tr>
				<th>Info</th>
				<th>Range (min,max)</th>
				<th>Domain (min,max)</th>
				<th>Data </th>
				<th>Scaled data Array</th>
				<th>Scaled data FLoat32Array</th>
			</tr>
		</thead>
		<tbody id="cBody"></tbody>
	</table>
	<script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
	<script src="../js/VLib/require.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function(){

			requirejs.config({
				appDir: "../",
				baseUrl: "../js/VLib"
			});

			var tests = [
			{
				info : "scale value",
				range : [0,400],
				domain : [0,5],
				data : 0
			},
			{
				info : "scale value",
				range : [0,400],
				domain : [0,5],
				data : 1
			},
			{
				info : "scale value",
				range : [0,400],
				domain : [0,5],
				data : 2
			},
			{
				info : "scale value",
				range : [0,400],
				domain : [0,5],
				data : 3
			},

			{
				info : "scale value",
				range : [0,400],
				domain : [0,5],
				data : 4
			},
			{
				info : "scale value",
				range : [0,400],
				domain : [0,5],
				data : 5
			},
			{
				info : "domain test",
				range : [0,400],
				domain : [0,5],
				data : [0,1,2,3,4,5]
			},
			{
				info : "domain test",
				range : [0,400],
				domain : [-5,5],
				data : [0,1,2,3,4,5]
			},
			{
				info : "domain test",
				range : [0,400],
				domain : [-5,5],
				data : [-5,-4,-3,-2,-1,0]
			},
			{
				info : "domain test",
				range : [0,400],
				domain : [-5,5],
				data : [-5,-4,-3,-2,-1,0,1,2,3,4,5]
			},
			{
				info : "range test",
				range : [-400,400],
				domain : [-5,5],
				data : [-5,-4,-3,-2,-1,0]
			},
			{
				info : "range test",
				range : [-400,400],
				domain : [-5,5],
				data : [0,1,2,3,4,5]
			},
			{
				info : "range test",
				range : [-400,400],
				domain : [-5,5],
				data : [-5,-4,-3,-2,-1,0,1,2,3,4,5]
			},
			];
			require(["core/utils/Utils.Scale.vlib"],function(Scale){
				var scaler = undefined;
				var result, resultf32;
				/* ARRAY */
				/* Float32Array */
				scaler = Scale();
				var f32;
				for(var i = 0, len = tests.length; i < len; ++i){
					scaler.range(tests[ i ].range);
					scaler.domain(tests[ i ].domain);
					if(tests[ i ].data instanceof Array){
						f32 = new Float32Array( tests[ i ].data );
					}else{
						f32 = new Float32Array( [ tests[ i ].data ] )[0];
					}
					result = scaler.linear(tests[ i ].data);
					resultf32 = scaler.linear(f32);
					add(tests[ i ].info,tests[ i ].range,tests[ i ].domain, tests[ i ].data, result, resultf32);
				}
				/* value */
				scaler.range(tests[ 5 ].range);
				scaler.domain(tests[ 5 ].domain);
				var v,vf32 = new Float32Array(1);
				v = 0, vf32[0] = 0;
				add('single value',tests[ 5 ].range,tests[ 5 ].domain, v, scaler.linearValue(v), scaler.linearValue(vf32[0]));
				v = 1, vf32[0] = 1;
				add('single value',tests[ 5 ].range,tests[ 5 ].domain, v, scaler.linearValue(v), scaler.linearValue(vf32[0]));
				v = 2, vf32[0] = 2;
				add('single value',tests[ 5 ].range,tests[ 5 ].domain, v, scaler.linearValue(v), scaler.linearValue(vf32[0]));
				v = 3, vf32[0] = 3;
				add('single value',tests[ 5 ].range,tests[ 5 ].domain, v, scaler.linearValue(v), scaler.linearValue(vf32[0]));
				v = 4, vf32[0] = 4;
				add('single value',tests[ 5 ].range,tests[ 5 ].domain, v, scaler.linearValue(v), scaler.linearValue(vf32[0]));
				v = 5, vf32[0] = 5;
				add('single value',tests[ 5 ].range,tests[ 5 ].domain, v, scaler.linearValue(v), scaler.linearValue(vf32[0]));
				function add(info,range,domain,input, result, resultf32){
					var resultString = "";
					if( resultf32 instanceof Float32Array ){
						for(var i = 0, len = resultf32.length; i < len;++i){
							resultString += resultf32[i].toFixed(0)+" ";
						}
					}else{
						resultString = resultf32.toFixed(0);
					}
					var row = $('<tr/>');
					row.append('<td>'+info+'</td>');
					row.append('<td>'+range+'</td>');
					row.append('<td>'+domain+'</td>');
					row.append('<td>'+input+'</td>');
					row.append('<td>'+result+'</td>');
					row.append('<td>'+resultString+'</td>');
					$('#cBody').append(row);
				}
			});
});
</script>

</body>
</html>
